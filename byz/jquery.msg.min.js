/*! Copyright 2011, Ben Lin (http://dreamerslab.com/)
* Licensed under the MIT License (LICENSE.txt).
*
* Version: 1.0.7
*
* Requires: 
* jQuery 1.3.0+, 
* jQuery Center plugin 1.0.0+ https://github.com/dreamerslab/jquery.center
*/
(function($,doc){var globalConfigs={},msgID=0,autoUnblock,beforeUnblock=[function(){}];$.msg=function(){var $overlay,$content,options,type,configs,_,publicMethods;options=[].shift.call(arguments);type={}.toString.call(options);configs=$.extend({afterBlock:function(){},autoUnblock:true,center:{topPercentage:0.4},css:{},clickUnblock:true,content:"Please wait...",fadeIn:200,fadeOut:300,bgPath:"",klass:"black-on-white",method:"appendTo",target:"body",timeOut:1500,z:1000},globalConfigs);type==="[object Object]"&&$.extend(configs,options);_={unblock:function(){$overlay=$("#jquery-msg-overlay").fadeOut(configs.fadeOut,function(){beforeUnblock[configs.msgID]($overlay);$overlay.remove()});clearTimeout(autoUnblock)}};publicMethods={unblock:function(ms,_msgID){var _ms=ms===undefined?0:ms;configs.msgID=_msgID===undefined?msgID:_msgID;setTimeout(function(){_.unblock()},_ms)},replace:function(content){if({}.toString.call(content)!=="[object String]"){throw"$.msg('replace'); error: second argument has to be a string"}$("#jquery-msg-content").empty().html(content).center(configs.center)},overwriteGlobal:function(name,config){globalConfigs[name]=config}};msgID--;configs.msgID=configs.msgID===undefined?msgID:configs.msgID;beforeUnblock[configs.msgID]=configs.beforeUnblock===undefined?function(){}:configs.beforeUnblock;if(type==="[object String]"){publicMethods[options].apply(publicMethods,arguments)}else{$overlay=$('<div id="jquery-msg-overlay" class="'+configs.klass+'" style="position:absolute; z-index:'+configs.z+'; top:0px; right:0px; left:0px; width:4096px; height:2160px;">'+'<img src="'+configs.bgPath+'blank.gif" id="jquery-msg-bg" style="width: 100%; height: 100%; top: 0px; left: 0px;"/>'+'<div id="jquery-msg-content" class="jquery-msg-content" style="position:absolute;">'+configs.content+"</div>"+"</div>");$overlay[configs.method](configs.target);$content=$("#jquery-msg-content").center(configs.center).css(configs.css).hide();$overlay.hide().fadeIn(configs.fadeIn,function(){$content.fadeIn("fast").children().addBack().bind("click",function(e){e.stopPropagation()});configs.afterBlock.call(publicMethods,$overlay);configs.clickUnblock&&$overlay.bind("click",function(e){e.stopPropagation();_.unblock()});if(configs.autoUnblock){autoUnblock=setTimeout(_.unblock,configs.timeOut)}})}return this}})(jQuery,document);